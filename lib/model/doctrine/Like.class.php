<?php

/**
 * Like
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    getLokal
 * @subpackage model
 * @author     Get Lokal
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Like extends BaseLike
{
  public function postSave($event)
  {
    $count = Doctrine::getTable('Like')
              ->createQuery('l')
              ->where('l.activity_id = ?', $this->getActivityId())
              ->count();
              
    $activity = $this->getActivity();
    $activity->setVotesCount($count);
    $activity->clearRelated();
    $activity->save();
  }
}