<?php

/**
 * mailBgCampaign
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    getLokal
 * @subpackage model
 * @author     Get Lokal
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class mailBgCampaign extends BasemailBgCampaign
{

  const MAX_ITEMS_PER_CITY = 4;
  public function getNumberOfActiveItemsInCity()
  {  	
  	$count = Doctrine::getTable('mailBgCampaign')
  	->createQuery('mbc')
  	->addWhere('mbc.city_id = ? ', $this->getCityId())
  	->andWhere('mbc.is_active = ?', true)
  	->count();
  	return  $count;
  }
}