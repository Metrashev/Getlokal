<?php

/**
 * CategoryArticleTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class CategoryArticleTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object CategoryArticleTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('CategoryArticle');
    }
    public function getTranslatedSlug($slug, $culture = 'en')
    {
    	
    	
    	$original = $this->createQuery('ca')
    		->innerJoin('ca.Translation cat')
    		->leftJoin('ca.ArticleCategory ac')
    		->leftJoin('ac.Article a')
    		->innerJoin('a.Translation at')
    		->where('cat.slug = ?', $slug)
    		->addWhere('at.lang = ? ', $culture)
    		->addWhere( 'a.country_id = ?', getlokalPartner::getInstanceDomain())
    		->fetchOne();
    	
    	if($original)
    		return $this->createQuery('a')->innerJoin('a.Translation')->where('a.id = ?', $original->getId())->fetchOne()->Translation[$culture]->slug;
    
    	return false;
    }
}