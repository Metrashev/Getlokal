<?php

/**
 * ListPage
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    getLokal
 * @subpackage model
 * @author     Get Lokal
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class ListPage extends BaseListPage {
	public function postInsert($event) {
		parent::postInsert ( $event );
		if ($this->getCompanyPage ()->getCompany ()->getFollowers ( true )
		or $this->getLists ()->getUserProfile()->getFollowers( true )) {
			$activity = new ActivityPage ();
			$activity->setText ( $this->getLists ()->getDescription () );
			$activity->setCaption ( $this->getLists ()->getTitle () );
			$activity->setUserId ( $this->getLists ()->getUserId () );
			$activity->setPageId ( $this->getCompanyPage ()->getId () );
			if ($this->getLists ()->getImage ()) {
				$activity->setMediaId ( $this->getLists ()->getImageId () );
			}
			$listactivity = Doctrine::getTable ( 'ActivityList' )->getActivity ( $this->getLists ()->getId () );
			$activity->setActivityId ( $listactivity->getId () );
			$activity->save ();
		}
	}
}